<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>CONSIA ∞</title>

<style>
body{
  margin:0;
  background:#05070b;
  color:#e8eef8;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto;
}

#app{
  max-width:900px;
  margin:auto;
  padding:20px;
}

.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}

.online{
  color:#19d37d;
  font-weight:bold;
}

.chat{
  background:#0b1018;
  border-radius:18px;
  padding:20px;
  min-height:420px;
  box-shadow:0 10px 40px rgba(0,0,0,.45);
  overflow:auto;
}

.msg{
  margin:10px 0;
  padding:12px 14px;
  border-radius:12px;
  max-width:80%;
}

.user{ background:#123055; margin-left:auto; }
.ai{ background:#16212e; }

.inputBar{
  display:flex;
  gap:10px;
  margin-top:15px;
}

input{
  flex:1;
  padding:14px;
  border-radius:12px;
  border:none;
  outline:none;
  background:#0b1018;
  color:white;
}

button{
  padding:14px 18px;
  border:none;
  border-radius:12px;
  background:#19d37d;
  color:black;
  font-weight:bold;
}
</style>
</head>

<body>
<div id="app">

  <div class="header">
    <h2>CONSIA ∞</h2>
    <div class="online">ONLINE</div>
  </div>

  <div id="chat" class="chat"></div>

  <div class="inputBar">
    <input id="msg" placeholder='Decí lo que querés (o escribí ".")' />
    <button onclick="send()">Enviar</button>
  </div>

</div>

<script>
const API="https://api.consia.world/ask";

function add(text,cls){
  const div=document.createElement("div");
  div.className="msg "+cls;
  div.innerText=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}

async function send(){
  const input=document.getElementById("msg");
  const text=input.value.trim();
  if(!text) return;

  add(text,"user");
  input.value="";

  try{
    const r=await fetch(API,{
      method:"POST",
      headers:{ "content-type":"application/json" },
      body:JSON.stringify({ message:text, lang:"ES" })
    });

    const j=await r.json();
    add(j.reply || "OK","ai");

  }catch(e){
    add("Fallback activo.","ai");
  }
}

/* ENTER key */
document.getElementById("msg")
.addEventListener("keydown",e=>{
  if(e.key==="Enter") send();
});

/* HELLO AUTO */
add("CONSIA realtime activo.","ai");
</script>

</body>
</html>
